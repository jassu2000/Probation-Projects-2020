const express= require("express");
const { userInfo } = require("os");
const bodyparser = require("body-parser");
const mongoose = require("mongoose");

mongoose.connect(("mongodb://localhost:27017/projectsDB"), { useNewUrlParser: true, useUnifiedTopology: true }) ;
const app = express();
app.use(bodyparser.urlencoded({extended:true}));
app.set("view engine","ejs");

const founditem = [];
const itemSchema = new mongoose.Schema({
    name:String,
    description:String
    // rating:Number
} );
const Item = mongoose.model("Item", itemSchema);


app.get("/", function(req,res){
    Item.find({}, function(err,founditem){
        if(err){
            console.log(err);
        }
        else{
            console.log(founditem);
        }
    });
    res.render("List",{newlistitems:founditem});
    // res.redirect("/");
});
app.post("/", function(request,response){

    const  itemname = request.body.newitem;
    const description = request.body.description;
    item = new Item({
        name:itemname,
        description:description
    });
    item.save();
    response.redirect("/");
    });

    app.listen(3000,function(){
        console.log("server started at the port 3000");
    });
